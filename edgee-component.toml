manifest-version = 1

[component]
name = "matomo"
version = "0.2.7"

category = "data-collection"
subcategory = "analytics"
description = "Edgee Component: Matomo Tracker â€“ Collect and send page views, events, and user data to Matomo from the Edge network, leveraging Rust and WebAssembly. Supports automatic mapping of Edgee event context to Matomo Tracking API."
documentation = "https://github.com/edgee-cloud/matomo-component"
repository = "https://github.com/edgee-cloud/matomo-component"
language = "Rust"
wit-version = "1.0.0"
icon-path = "matomo.png"

[component.build]
command = "cargo build --target wasm32-wasip2 --release --target-dir ./target && rm -f ./matomo.wasm && mv ./target/wasm32-wasip2/release/matomo.wasm ./matomo.wasm"
output_path = "matomo.wasm"

[component.settings.authentication_token]
title = "Matomo Authentication Token"
type = "string"
required = false
description = "Optional token used for authenticated tracking (e.g. for IP override or retroactive events). You can generate it in your Matomo user settings under the Security tab."
secret = true

[component.settings.site_id]
title = "Matomo Site ID"
type = "string"
required = true
description = "The numerical site ID from your Matomo dashboard used to identify which site the data belongs to."

[component.settings.endpoint_url]
title = "Matomo Endpoint URL"
type = "string"
required = true
description = "The base URL of your Matomo instance, including protocol (e.g., https://matomo.example.com/)."